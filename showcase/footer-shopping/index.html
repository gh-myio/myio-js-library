<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FooterShoppingComponent Showcase - RFC-0149</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      /* MyIO Design System */
      --myio-bg: #F5F5F5;
      --myio-card-bg: #FFFFFF;
      --myio-card-border: #E0E0E0;
      --myio-text-primary: #222222;
      --myio-text-secondary: #666666;
      --myio-accent: #00C896;
      --myio-primary: #5B2EBC;

      /* Footer Theme - Purple */
      --myio-footer-primary: #9E8CBE;
      --myio-footer-primary-hover: #B8A5D6;
      --myio-footer-bg: linear-gradient(180deg, rgba(158, 140, 190, 0.95) 0%, rgba(132, 114, 168, 0.98) 100%);
      --myio-footer-text: #ffffff;
      --myio-btn-compare-bg: #3E1A7D;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--myio-bg);
      min-height: 100vh;
      padding: 20px;
      padding-bottom: 120px; /* Space for footer */
    }

    .showcase-header {
      background: var(--myio-card-bg);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .showcase-header h1 {
      color: var(--myio-text-primary);
      font-size: 1.5rem;
      margin-bottom: 8px;
    }

    .showcase-header p {
      color: var(--myio-text-secondary);
      font-size: 0.9rem;
    }

    .controls {
      display: flex;
      gap: 12px;
      margin-top: 16px;
      flex-wrap: wrap;
    }

    .controls button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
    }

    .btn-primary {
      background: var(--myio-primary);
      color: white;
    }

    .btn-primary:hover {
      background: #4a25a0;
    }

    .btn-secondary {
      background: var(--myio-card-border);
      color: var(--myio-text-primary);
    }

    .btn-secondary:hover {
      background: #d0d0d0;
    }

    .btn-danger {
      background: #ff4444;
      color: white;
    }

    .btn-danger:hover {
      background: #cc3333;
    }

    /* Device Cards Grid */
    .devices-section {
      background: var(--myio-card-bg);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .devices-section h2 {
      font-size: 1rem;
      color: var(--myio-text-secondary);
      margin-bottom: 16px;
    }

    .devices-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 12px;
    }

    .device-card {
      background: var(--myio-bg);
      border: 2px solid transparent;
      border-radius: 10px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .device-card:hover {
      border-color: var(--myio-primary);
      transform: translateY(-2px);
    }

    .device-card.selected {
      border-color: var(--myio-accent);
      background: rgba(0, 200, 150, 0.1);
    }

    .device-card .device-icon {
      font-size: 1.5rem;
      margin-bottom: 8px;
    }

    .device-card .device-name {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--myio-text-primary);
      margin-bottom: 4px;
    }

    .device-card .device-value {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--myio-primary);
    }

    .device-card .device-type {
      font-size: 0.75rem;
      color: var(--myio-text-secondary);
      margin-top: 4px;
      text-transform: uppercase;
    }

    /* Footer Component */
    .myio-footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 60px;
      z-index: 1000;

      display: flex;
      align-items: center;
      gap: 14px;
      padding: 0 18px;

      font-family: 'Inter', sans-serif;
      color: var(--myio-footer-text);
      background: var(--myio-footer-bg);
      border-top: 2px solid rgba(184, 165, 214, 0.5);
      box-shadow: 0 -4px 24px rgba(158, 140, 190, 0.3);
      backdrop-filter: blur(24px);
    }

    .myio-dock {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 12px;
      overflow-x: auto;
      overflow-y: hidden;
      padding: 8px 0;
      scrollbar-width: thin;
      scrollbar-color: rgba(158, 140, 190, 0.6) transparent;
    }

    .myio-dock::-webkit-scrollbar {
      height: 6px;
    }

    .myio-dock::-webkit-scrollbar-thumb {
      background: linear-gradient(90deg, var(--myio-footer-primary) 0%, var(--myio-footer-primary-hover) 100%);
      border-radius: 3px;
    }

    .myio-chip {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      height: 40px;
      flex-shrink: 0;
      background: linear-gradient(135deg, rgba(158, 140, 190, 0.25) 0%, rgba(158, 140, 190, 0.15) 100%);
      border: 1px solid rgba(184, 165, 214, 0.4);
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
      white-space: nowrap;
      animation: chipSlideIn 0.3s ease-out;
    }

    @keyframes chipSlideIn {
      from { opacity: 0; transform: translateY(20px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .myio-chip:hover {
      background: linear-gradient(135deg, rgba(158, 140, 190, 0.35) 0%, rgba(158, 140, 190, 0.25) 100%);
      border-color: rgba(184, 165, 214, 0.6);
      transform: translateY(-2px);
    }

    .myio-chip-content {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .myio-chip-name {
      font-size: 11px;
      font-weight: 600;
      color: #ffffff;
    }

    .myio-chip-value {
      font-size: 13px;
      font-weight: 700;
      color: #ffffff;
    }

    .myio-chip-remove {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
      padding: 0;
      margin-left: 4px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 6px;
      color: rgba(255, 255, 255, 0.6);
      cursor: pointer;
      transition: all 0.2s;
    }

    .myio-chip-remove:hover {
      background: linear-gradient(135deg, rgba(255, 68, 68, 0.25) 0%, rgba(255, 68, 68, 0.15) 100%);
      border-color: rgba(255, 68, 68, 0.5);
      color: #ff4444;
      transform: scale(1.05);
    }

    .myio-chip-remove svg {
      width: 14px;
      height: 14px;
      stroke-width: 2.5;
    }

    .myio-empty {
      color: var(--myio-footer-text);
      font-size: 14px;
      font-weight: 600;
      padding: 10px 20px;
      opacity: 0.8;
      background: linear-gradient(135deg, rgba(158, 140, 190, 0.15) 0%, transparent 100%);
      border: 1px dashed rgba(184, 165, 214, 0.4);
      border-radius: 10px;
      animation: pulseGlow 2s ease-in-out infinite;
    }

    @keyframes pulseGlow {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    .myio-right {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-shrink: 0;
    }

    .myio-meta {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0;
      padding: 6px 12px;
      min-width: 100px;
      background: linear-gradient(135deg, rgba(158, 140, 190, 0.15) 0%, rgba(158, 140, 190, 0.08) 100%);
      border: 1px solid rgba(184, 165, 214, 0.3);
      border-radius: 10px;
    }

    .myio-meta-title {
      font-size: 10px;
      font-weight: 700;
      color: var(--myio-footer-text);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    #myioTotals {
      font-size: 12px;
      font-weight: 700;
      color: var(--myio-footer-text);
    }

    .myio-clear-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      padding: 0;
      background: linear-gradient(135deg, rgba(200, 200, 200, 0.2) 0%, rgba(200, 200, 200, 0.1) 100%);
      border: 1px solid rgba(200, 200, 200, 0.3);
      border-radius: 10px;
      color: #cccccc;
      cursor: pointer;
      transition: all 0.2s;
    }

    .myio-clear-btn:hover:not(:disabled) {
      background: linear-gradient(135deg, rgba(255, 68, 68, 0.2) 0%, rgba(255, 68, 68, 0.1) 100%);
      border-color: rgba(255, 68, 68, 0.4);
      color: #ff4444;
    }

    .myio-clear-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .myio-clear-btn svg {
      width: 18px;
      height: 18px;
      stroke-width: 2;
    }

    .myio-compare {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      height: 36px;
      min-width: 110px;
      padding: 0 18px;
      font-family: inherit;
      font-size: 13px;
      font-weight: 700;
      text-transform: uppercase;
      background: var(--myio-btn-compare-bg);
      border: none;
      border-radius: 10px;
      color: var(--myio-footer-text);
      cursor: pointer;
      box-shadow: 0 4px 16px rgba(62, 26, 125, 0.4);
      transition: all 0.2s;
    }

    .myio-compare:hover:not(:disabled) {
      background: linear-gradient(135deg, #5A2CB8 0%, #3E1A7D 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 24px rgba(62, 26, 125, 0.6);
    }

    .myio-compare:disabled {
      background: rgba(100, 100, 100, 0.3);
      color: rgba(255, 255, 255, 0.4);
      cursor: not-allowed;
      box-shadow: none;
    }

    .myio-compare::after {
      content: '\2192';
      font-size: 16px;
      transition: transform 0.2s;
    }

    .myio-compare:hover:not(:disabled)::after {
      transform: translateX(4px);
    }

    .myio-compare:disabled::after {
      display: none;
    }

    /* Alert Modal */
    .myio-alert-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 100000;
      justify-content: center;
      align-items: center;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      animation: fadeIn 0.2s ease-out;
    }

    .myio-alert-overlay.active {
      display: flex;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .myio-alert-box {
      max-width: 420px;
      width: 90%;
      padding: 32px;
      background: linear-gradient(135deg, #2a3040 0%, #1a1f28 100%);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
      animation: slideUp 0.3s ease-out;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(40px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .myio-alert-icon {
      width: 64px;
      height: 64px;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, rgba(255, 193, 7, 0.2) 0%, rgba(255, 152, 0, 0.2) 100%);
      border: 2px solid rgba(255, 193, 7, 0.5);
      border-radius: 50%;
      color: #ffc107;
      font-size: 32px;
    }

    .myio-alert-title {
      margin: 0 0 12px;
      font-size: 22px;
      font-weight: 700;
      color: #ffffff;
      text-align: center;
    }

    .myio-alert-message {
      margin: 0 0 24px;
      font-size: 15px;
      color: rgba(255, 255, 255, 0.7);
      text-align: center;
      line-height: 1.6;
    }

    .myio-alert-button {
      width: 100%;
      height: 48px;
      font-family: inherit;
      font-size: 14px;
      font-weight: 700;
      text-transform: uppercase;
      background: linear-gradient(135deg, var(--myio-footer-primary) 0%, var(--myio-footer-primary-dark, #8472A8) 100%);
      border: none;
      border-radius: 12px;
      color: #ffffff;
      cursor: pointer;
      transition: all 0.2s;
    }

    .myio-alert-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 24px rgba(158, 140, 190, 0.5);
    }

    /* Event Log */
    .event-log {
      background: var(--myio-card-bg);
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .event-log h3 {
      font-size: 0.9rem;
      color: var(--myio-text-secondary);
      margin-bottom: 12px;
    }

    .log-entries {
      font-family: 'Consolas', monospace;
      font-size: 0.8rem;
      max-height: 150px;
      overflow-y: auto;
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 12px;
      border-radius: 8px;
    }

    .log-entry {
      padding: 4px 0;
      border-bottom: 1px solid #333;
    }

    .log-entry:last-child {
      border-bottom: none;
    }

    .log-time {
      color: #6a9955;
    }

    .log-event {
      color: #dcdcaa;
    }

    .log-data {
      color: #9cdcfe;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="showcase-header">
    <h1>FooterShoppingComponent Showcase</h1>
    <p>RFC-0149 - Componente de selecao e comparacao de dispositivos</p>

    <div class="controls">
      <button class="btn-primary" id="btn-add-energy">+ Energia</button>
      <button class="btn-primary" id="btn-add-water">+ Agua</button>
      <button class="btn-primary" id="btn-add-temp">+ Temperatura</button>
      <button class="btn-secondary" id="btn-clear">Limpar Tudo</button>
      <button class="btn-danger" id="btn-show-limit">Simular Limite</button>
      <button class="btn-danger" id="btn-show-mixed">Simular Mix</button>
    </div>
  </div>

  <!-- Device Cards -->
  <div class="devices-section">
    <h2>Dispositivos Disponiveis (clique para selecionar)</h2>
    <div class="devices-grid" id="devices-grid">
      <!-- Device cards will be rendered here -->
    </div>
  </div>

  <!-- Event Log -->
  <div class="event-log">
    <h3>Event Log</h3>
    <div class="log-entries" id="log-entries">
      <!-- Log entries will be appended here -->
    </div>
  </div>

  <!-- Footer Component -->
  <section class="myio-footer" id="myio-footer">
    <div class="myio-dock" id="myioDock">
      <span class="myio-empty">Selecione dispositivos para comparar</span>
    </div>
    <div class="myio-right">
      <div class="myio-meta">
        <div class="myio-meta-title">SELECAO</div>
        <div id="myioTotals">0 itens</div>
      </div>
      <button id="myioClear" class="myio-clear-btn" title="Limpar selecao" disabled>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="3 6 5 6 21 6"></polyline>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        </svg>
      </button>
      <button id="myioCompare" class="myio-compare" disabled>Comparar</button>
    </div>
  </section>

  <!-- Alert Modal -->
  <div class="myio-alert-overlay" id="alertOverlay">
    <div class="myio-alert-box">
      <div class="myio-alert-icon" id="alertIcon">!</div>
      <h2 class="myio-alert-title" id="alertTitle">Alerta</h2>
      <p class="myio-alert-message" id="alertMessage">Mensagem do alerta</p>
      <button class="myio-alert-button" id="alertButton">FECHAR</button>
    </div>
  </div>

  <script>
    // ===================== STATE =====================

    const MAX_SELECTION = 6;
    let selectedEntities = [];
    let deviceIdCounter = 1;

    // Mock devices
    const mockDevices = [
      { id: 'energy-1', name: 'Medidor Entrada', icon: 'energy', lastValue: 15234.56, unit: 'kWh' },
      { id: 'energy-2', name: 'Chiller 01', icon: 'energy', lastValue: 4521.32, unit: 'kWh' },
      { id: 'energy-3', name: 'Elevador A', icon: 'energy', lastValue: 1234.78, unit: 'kWh' },
      { id: 'water-1', name: 'Hidrometro Principal', icon: 'water', lastValue: 523.456, unit: 'm3' },
      { id: 'water-2', name: 'Hidrometro Lojas', icon: 'water', lastValue: 145.234, unit: 'm3' },
      { id: 'temp-1', name: 'Termostato Sala 01', icon: 'temperature', lastValue: 22.5, unit: 'C' },
      { id: 'temp-2', name: 'Termostato Sala 02', icon: 'temperature', lastValue: 23.1, unit: 'C' },
    ];

    // ===================== HELPERS =====================

    function formatValue(value, icon) {
      if (typeof value !== 'number' || isNaN(value)) return '0';

      if (icon === 'water') {
        return value.toLocaleString('pt-BR', { minimumFractionDigits: 3, maximumFractionDigits: 3 });
      } else if (icon === 'temperature') {
        return value.toLocaleString('pt-BR', { minimumFractionDigits: 1, maximumFractionDigits: 1 });
      } else {
        return value.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
      }
    }

    function getIconEmoji(icon) {
      const icons = {
        energy: '\u26A1',
        water: '\uD83D\uDCA7',
        temperature: '\uD83C\uDF21'
      };
      return icons[icon] || '\u2022';
    }

    function logEvent(event, data) {
      const logEntries = document.getElementById('log-entries');
      const time = new Date().toLocaleTimeString('pt-BR');
      const entry = document.createElement('div');
      entry.className = 'log-entry';
      entry.innerHTML = `<span class="log-time">[${time}]</span> <span class="log-event">${event}</span>: <span class="log-data">${JSON.stringify(data)}</span>`;
      logEntries.insertBefore(entry, logEntries.firstChild);

      while (logEntries.children.length > 15) {
        logEntries.removeChild(logEntries.lastChild);
      }
    }

    // ===================== SELECTION =====================

    function detectUnitType() {
      if (selectedEntities.length === 0) return null;
      const types = new Set(selectedEntities.map(e => e.icon));
      if (types.size > 1) return 'mixed';
      return Array.from(types)[0];
    }

    function addEntity(entity) {
      if (selectedEntities.length >= MAX_SELECTION) {
        showLimitAlert();
        return false;
      }

      // Check for mixed types
      const currentType = detectUnitType();
      if (currentType && currentType !== 'mixed' && entity.icon !== currentType) {
        showMixedUnitsAlert();
        return false;
      }

      // Check if already selected
      if (selectedEntities.find(e => e.id === entity.id)) {
        return false;
      }

      selectedEntities.push(entity);
      logEvent('entity-added', { id: entity.id, name: entity.name });
      renderFooter();
      renderDeviceCards();
      return true;
    }

    function removeEntity(id) {
      const idx = selectedEntities.findIndex(e => e.id === id);
      if (idx !== -1) {
        const removed = selectedEntities.splice(idx, 1)[0];
        logEvent('entity-removed', { id: removed.id, name: removed.name });
        renderFooter();
        renderDeviceCards();
      }
    }

    function clearSelection() {
      selectedEntities = [];
      logEvent('selection-cleared', {});
      renderFooter();
      renderDeviceCards();
    }

    // ===================== RENDERING =====================

    function renderDeviceCards() {
      const grid = document.getElementById('devices-grid');
      grid.innerHTML = mockDevices.map(device => {
        const isSelected = selectedEntities.find(e => e.id === device.id);
        return `
          <div class="device-card ${isSelected ? 'selected' : ''}" data-id="${device.id}">
            <div class="device-icon">${getIconEmoji(device.icon)}</div>
            <div class="device-name">${device.name}</div>
            <div class="device-value">${formatValue(device.lastValue, device.icon)} ${device.unit}</div>
            <div class="device-type">${device.icon}</div>
          </div>
        `;
      }).join('');

      // Add click handlers
      grid.querySelectorAll('.device-card').forEach(card => {
        card.addEventListener('click', () => {
          const id = card.dataset.id;
          const device = mockDevices.find(d => d.id === id);
          if (device) {
            const isSelected = selectedEntities.find(e => e.id === id);
            if (isSelected) {
              removeEntity(id);
            } else {
              addEntity(device);
            }
          }
        });
      });
    }

    function renderFooter() {
      const dock = document.getElementById('myioDock');
      const totals = document.getElementById('myioTotals');
      const compareBtn = document.getElementById('myioCompare');
      const clearBtn = document.getElementById('myioClear');

      const count = selectedEntities.length;

      if (count === 0) {
        dock.innerHTML = '<span class="myio-empty">Selecione dispositivos para comparar</span>';
        totals.textContent = '0 itens';
      } else {
        // Calculate total/average
        const unitType = detectUnitType();
        let totalValue = selectedEntities.reduce((sum, e) => sum + (e.lastValue || 0), 0);

        if (unitType === 'temperature') {
          totalValue = totalValue / count; // Average for temperature
        }

        // Render chips
        dock.innerHTML = selectedEntities.map(entity => `
          <div class="myio-chip" data-id="${entity.id}">
            <div class="myio-chip-content">
              <span class="myio-chip-name">${entity.name}</span>
              <span class="myio-chip-value">${formatValue(entity.lastValue, entity.icon)} ${entity.unit}</span>
            </div>
            <button class="myio-chip-remove" data-id="${entity.id}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        `).join('');

        // Add remove handlers
        dock.querySelectorAll('.myio-chip-remove').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.stopPropagation();
            removeEntity(btn.dataset.id);
          });
        });

        const prefix = unitType === 'temperature' ? 'Media: ' : '';
        const itemText = count === 1 ? 'item' : 'itens';
        totals.textContent = `${count} ${itemText} (${prefix}${formatValue(totalValue, unitType)})`;
      }

      compareBtn.disabled = count < 2;
      clearBtn.disabled = count === 0;
    }

    // ===================== ALERTS =====================

    function showAlert(icon, title, message) {
      const overlay = document.getElementById('alertOverlay');
      document.getElementById('alertIcon').textContent = icon;
      document.getElementById('alertTitle').textContent = title;
      document.getElementById('alertMessage').innerHTML = message;
      overlay.classList.add('active');
      logEvent('alert-shown', { title });
    }

    function hideAlert() {
      document.getElementById('alertOverlay').classList.remove('active');
    }

    function showLimitAlert() {
      showAlert('\u26A0', 'Limite Atingido', `Voce pode selecionar no maximo <strong>${MAX_SELECTION} dispositivos</strong> para comparacao. Remova um dispositivo antes de adicionar outro.`);
    }

    function showMixedUnitsAlert() {
      showAlert('\u26A0', 'Tipos Incompativeis', 'Voce nao pode comparar dispositivos de <strong>tipos diferentes</strong> (ex: energia vs agua). Selecione apenas dispositivos do mesmo tipo.');
    }

    // ===================== EVENT HANDLERS =====================

    document.addEventListener('DOMContentLoaded', () => {
      // Control buttons
      document.getElementById('btn-add-energy').addEventListener('click', () => {
        const device = {
          id: `energy-new-${deviceIdCounter++}`,
          name: `Medidor ${deviceIdCounter}`,
          icon: 'energy',
          lastValue: Math.random() * 10000,
          unit: 'kWh'
        };
        addEntity(device);
      });

      document.getElementById('btn-add-water').addEventListener('click', () => {
        const device = {
          id: `water-new-${deviceIdCounter++}`,
          name: `Hidrometro ${deviceIdCounter}`,
          icon: 'water',
          lastValue: Math.random() * 500,
          unit: 'm3'
        };
        addEntity(device);
      });

      document.getElementById('btn-add-temp').addEventListener('click', () => {
        const device = {
          id: `temp-new-${deviceIdCounter++}`,
          name: `Termostato ${deviceIdCounter}`,
          icon: 'temperature',
          lastValue: 18 + Math.random() * 10,
          unit: 'C'
        };
        addEntity(device);
      });

      document.getElementById('btn-clear').addEventListener('click', clearSelection);

      document.getElementById('btn-show-limit').addEventListener('click', showLimitAlert);

      document.getElementById('btn-show-mixed').addEventListener('click', showMixedUnitsAlert);

      // Footer buttons
      document.getElementById('myioClear').addEventListener('click', clearSelection);

      document.getElementById('myioCompare').addEventListener('click', () => {
        logEvent('compare-clicked', {
          count: selectedEntities.length,
          type: detectUnitType()
        });
        alert('Modal de comparacao seria aberta aqui!\n\nDispositivos: ' + selectedEntities.map(e => e.name).join(', '));
      });

      // Alert close
      document.getElementById('alertButton').addEventListener('click', hideAlert);
      document.getElementById('alertOverlay').addEventListener('click', (e) => {
        if (e.target.id === 'alertOverlay') hideAlert();
      });

      // Initial render
      renderDeviceCards();
      renderFooter();
      logEvent('showcase-initialized', { deviceCount: mockDevices.length });
    });
  </script>
</body>
</html>
