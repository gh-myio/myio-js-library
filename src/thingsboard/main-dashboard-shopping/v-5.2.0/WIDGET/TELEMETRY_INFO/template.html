<!--
  ThingsBoard Widget: TELEMETRY_INFO (MyIO v-5.2.0)
  RFC-0056: Grid 2 columns layout with 6 categories
  - Entrada, Climatiza√ß√£o, Elevadores, Esc. Rolantes, Lojas, √Årea Comum (residual)
-->

<section class="telemetry-info-root">
  <!-- HEADER -->
  <header class="info-header">
    <h2 class="info-title">‚ÑπÔ∏è Informa√ß√µes de Energia</h2>
    <button class="btn-expand" id="btnExpandModal" title="Expandir visualiza√ß√£o">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/>
      </svg>
    </button>
  </header>

  <!-- GRID 2 COLUNAS -->
  <div class="info-grid">

    <!-- ========== ROW 1: ENTRADA + LOJAS ========== -->
    <div class="info-card entrada-card">
      <div class="card-header">
        <span class="card-icon">üì•</span>
        <h3 class="card-title">Entrada</h3>
      </div>
      <div class="card-body">
        <div class="stat-row main-stat">
          <span class="stat-value" id="entradaTotal">0,00 kWh</span>
        </div>
        <div class="devices-list" id="entradaDevices">
          <!-- Dispositivos de entrada (opcional) -->
        </div>
      </div>
    </div>

    <div class="info-card lojas-card">
      <div class="card-header">
        <span class="card-icon">üè™</span>
        <h3 class="card-title">Lojas</h3>
      </div>
      <div class="card-body">
        <div class="stat-row main-stat">
          <span class="stat-value" id="lojasTotal">0,00 kWh</span>
          <span class="stat-perc" id="lojasPerc">(0%)</span>
        </div>
      </div>
    </div>

    <!-- ========== ROW 2: CLIMATIZA√á√ÉO + ELEVADORES ========== -->
    <div class="info-card climatizacao-card">
      <div class="card-header">
        <span class="card-icon">‚ùÑÔ∏è</span>
        <h3 class="card-title">Climatiza√ß√£o</h3>
      </div>
      <div class="card-body">
        <div class="stat-row main-stat">
          <span class="stat-value" id="climatizacaoTotal">0,00 kWh</span>
          <span class="stat-perc" id="climatizacaoPerc">(0%)</span>
        </div>
      </div>
    </div>

    <div class="info-card elevadores-card">
      <div class="card-header">
        <span class="card-icon">üõó</span>
        <h3 class="card-title">Elevadores</h3>
      </div>
      <div class="card-body">
        <div class="stat-row main-stat">
          <span class="stat-value" id="elevadoresTotal">0,00 kWh</span>
          <span class="stat-perc" id="elevadoresPerc">(0%)</span>
        </div>
      </div>
    </div>

    <!-- ========== ROW 3: ESC. ROLANTES + OUTROS EQUIPAMENTOS ========== -->
    <div class="info-card escadas-card">
      <div class="card-header">
        <span class="card-icon">üé¢</span>
        <h3 class="card-title">Esc. Rolantes</h3>
      </div>
      <div class="card-body">
        <div class="stat-row main-stat">
          <span class="stat-value" id="escadasRolantesTotal">0,00 kWh</span>
          <span class="stat-perc" id="escadasRolantesPerc">(0%)</span>
        </div>
      </div>
    </div>

    <div class="info-card outros-card">
      <div class="card-header">
        <span class="card-icon">‚öôÔ∏è</span>
        <h3 class="card-title">Outros Equipamentos</h3>
      </div>
      <div class="card-body">
        <div class="stat-row main-stat">
          <span class="stat-value" id="outrosTotal">0,00 kWh</span>
          <span class="stat-perc" id="outrosPerc">(0%)</span>
        </div>
      </div>
    </div>

    <!-- ========== ROW 4: √ÅREA COMUM + TOTAL (SAME ROW) ========== -->
    <div class="info-card area-comum-card">
      <div class="card-header">
        <span class="card-icon">üè¢</span>
        <h3 class="card-title">
          √Årea Comum
          <span class="info-tooltip" title="Entrada - (Lojas + Climatiza√ß√£o + Elevadores + Esc. Rolantes + Outros)">‚ÑπÔ∏è</span>
        </h3>
      </div>
      <div class="card-body">
        <div class="stat-row main-stat">
          <span class="stat-value" id="areaComumTotal">0,00 kWh</span>
          <span class="stat-perc" id="areaComumPerc">(0%)</span>
        </div>
      </div>
    </div>

    <div class="info-card total-card">
      <div class="card-header">
        <span class="card-icon">üìä</span>
        <h3 class="card-title">Total Consumidores</h3>
      </div>
      <div class="card-body">
        <div class="stat-row main-stat">
          <span class="stat-value" id="consumidoresTotal">0,00 kWh</span>
          <span class="stat-perc" id="consumidoresPerc">(100%)</span>
        </div>
      </div>
    </div>

    <!-- ========== ROW 5: GR√ÅFICO (FULL WIDTH) ========== -->
    <div class="info-card chart-card">
      <div class="card-header">
        <h3 class="card-title">Distribui√ß√£o de Consumo</h3>
      </div>
      <div class="card-body">
        <div class="chart-container">
          <canvas id="consumptionPieChart"></canvas>
        </div>
        <div class="chart-legend" id="chartLegend">
          <!-- Legenda gerada dinamicamente -->
        </div>
      </div>
    </div>

  </div>

  <!-- ========== MODAL EXPANDIDA ========== -->
  <div class="modal-overlay" id="modalExpanded" style="display: none;">
    <div class="modal-container">
      <!-- Modal Header -->
      <div class="modal-header">
        <h2>üìä Vis√£o Detalhada - Informa√ß√µes de Energia</h2>
        <button class="btn-close" id="btnCloseModal" title="Fechar">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <!-- Modal Body: 30% Cards + 70% Chart -->
      <div class="modal-body">
        <!-- LEFT COLUMN: 30% - 8 Cards (2 per row) -->
        <div class="modal-cards-column">
          <!-- Row 1: Entrada + Lojas -->
          <div class="modal-card modal-entrada">
            <div class="modal-card-icon">üì•</div>
            <div class="modal-card-content">
              <h3>Entrada</h3>
              <div class="modal-card-value" id="modalEntradaTotal">0,00 kWh</div>
            </div>
          </div>

          <div class="modal-card modal-lojas">
            <div class="modal-card-icon">üè™</div>
            <div class="modal-card-content">
              <h3>Lojas</h3>
              <div class="modal-card-value" id="modalLojasTotal">0,00 kWh</div>
              <div class="modal-card-perc" id="modalLojasPerc">(0%)</div>
            </div>
          </div>

          <!-- Row 2: Climatiza√ß√£o + Elevadores -->
          <div class="modal-card modal-climatizacao">
            <div class="modal-card-icon">‚ùÑÔ∏è</div>
            <div class="modal-card-content">
              <h3>Climatiza√ß√£o</h3>
              <div class="modal-card-value" id="modalClimatizacaoTotal">0,00 kWh</div>
              <div class="modal-card-perc" id="modalClimatizacaoPerc">(0%)</div>
            </div>
          </div>

          <div class="modal-card modal-elevadores">
            <div class="modal-card-icon">üõó</div>
            <div class="modal-card-content">
              <h3>Elevadores</h3>
              <div class="modal-card-value" id="modalElevadoresTotal">0,00 kWh</div>
              <div class="modal-card-perc" id="modalElevadoresPerc">(0%)</div>
            </div>
          </div>

          <!-- Row 3: Escadas Rolantes + Outros -->
          <div class="modal-card modal-escadas">
            <div class="modal-card-icon">üé¢</div>
            <div class="modal-card-content">
              <h3>Esc. Rolantes</h3>
              <div class="modal-card-value" id="modalEscadasTotal">0,00 kWh</div>
              <div class="modal-card-perc" id="modalEscadasPerc">(0%)</div>
            </div>
          </div>

          <div class="modal-card modal-outros">
            <div class="modal-card-icon">‚öôÔ∏è</div>
            <div class="modal-card-content">
              <h3>Outros Equipamentos</h3>
              <div class="modal-card-value" id="modalOutrosTotal">0,00 kWh</div>
              <div class="modal-card-perc" id="modalOutrosPerc">(0%)</div>
            </div>
          </div>

          <!-- Row 4: √Årea Comum + Total -->
          <div class="modal-card modal-area-comum">
            <div class="modal-card-icon">üè¢</div>
            <div class="modal-card-content">
              <h3>
                √Årea Comum
                <span class="info-tooltip" title="Entrada - (Lojas + Climatiza√ß√£o + Elevadores + Esc. Rolantes + Outros)">‚ÑπÔ∏è</span>
              </h3>
              <div class="modal-card-value" id="modalAreaComumTotal">0,00 kWh</div>
              <div class="modal-card-perc" id="modalAreaComumPerc">(0%)</div>
            </div>
          </div>

          <div class="modal-card modal-total">
            <div class="modal-card-icon">üìä</div>
            <div class="modal-card-content">
              <h3>Total Consumidores</h3>
              <div class="modal-card-value" id="modalConsumidoresTotal">0,00 kWh</div>
              <div class="modal-card-perc" id="modalConsumidoresPerc">(100%)</div>
            </div>
          </div>
        </div>

        <!-- RIGHT COLUMN: 70% - Chart -->
        <div class="modal-chart-column">
          <h3 class="modal-chart-title">Distribui√ß√£o de Consumo</h3>
          <div class="modal-chart-container">
            <canvas id="modalConsumptionPieChart"></canvas>
          </div>
          <div class="modal-chart-legend" id="modalChartLegend">
            <!-- Legenda gerada dinamicamente -->
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
