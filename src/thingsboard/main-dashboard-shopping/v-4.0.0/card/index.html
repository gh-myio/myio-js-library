<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div id="content"></div>

    <script type="module">
      window.MyIOLibrary = window.MyIOLibrary || {
        formatEnergyByGroup: (v, g) => `${v} kWh${g ? " · " + g : ""}`,
        formatNumberReadable: (n) => Number(n ?? 0).toFixed(1),
      };
      import { renderCardComponent } from "./template-card.js";

      // Mock de entidades
      const mockEntities = [
        {
          entityId: "dev-001",
          labelOrName: "Bomba Giovani",
          entityType: "DEVICE",
          deviceType: "MOTOR",
          slaveId: "01",
          ingestionId: "ing-aaa",
          val: 1250,
          centralId: "21.111.222.333",
          isOn: true,
          perc: 45,
          group: "adm",
          connectionStatus: "online",
          handInfo: true,
          valType: "ENERGY",
          centralName:"Campinas",
          connectionStatusTime: 173699742300
        },
        {
          entityId: "dev-003",
          labelOrName: "Relógio Externo",
          entityType: "DEVICE",
          deviceType: "RELÓGIO",
          slaveId: "03",
          ingestionId: "ing-ccc",
          val: 1560,
          centralId: "21.111.222.335",
          isOn: true,
          perc: 75,
          group: "entrada",
          connectionStatus: "offline",
          valType: "ENERGY",
          centralName:"Mestre Álvare",
          connectionStatusTime: 1736997423000
        },
        {
          entityId: "dev-004",
          labelOrName: "Hidr. Cardeman",
          entityType: "DEVICE",
          deviceType: "HIDROMETRO",
          slaveId: "04",
          ingestionId: "ing-ccc",
          val: 1560,
          centralId: "21.111.222.335",
          isOn: true,
          perc: 85,
          group: "ambientes",
          connectionStatus: "online",
          valType: "ENERGY",
          centralName:"Teta",
          connectionStatusTime: 1736997423000
        },
        {
          entityId: "dev-005",
          labelOrName: "Loja do Vitinho",
          entityType: "DEVICE",
          deviceType: "3F_MEDIDOR",
          slaveId: "05",
          ingestionId: "ing-ccc",
          val: 1560,
          centralId: "21.111.222.335",
          isOn: true,
          perc: 85,
          group: "lojas",
          connectionStatus: "offline",
          valType: "ENERGY",
          centralName:"Ilha Plaza",
          connectionStatusTime: 1736997423000

        },
        {
          entityId: "dev-005",
          labelOrName: "Entrada Poderosa",
          entityType: "DEVICE",
          deviceType: "ENTRADa",
          slaveId: "05",
          ingestionId: "ing-ccc",
          val: 1560,
          centralId: "21.111.222.335",
          isOn: true,
          perc: 85,
          group: "entrada",
          connectionStatus: "online",
          valType: "WATER",
          centralName:"Meir",
          connectionStatusTime: 1736997423000
        },
        {
          entityId: "dev-006",
          labelOrName: "Caixa D'TETA",
          entityType: "DEVICE",
          deviceType: "CAIXA_DAGUA",
          slaveId: "05",
          ingestionId: "ing-ccc",
          val: 1560,
          centralId: "21.111.222.335",
          isOn: true,
          perc: 85,
          group: "entrada",
          connectionStatus: "offline",
          valType: "TANK",
          centralName:"BB Campos",
          connectionStatusTime: 1736997423000

        },
      ];

      // Mock de handlers
      function logHandler(type) {
        return (entity) => console.log(`[${type}]`, entity);
      }

      // Renderizar os cards
      mockEntities.forEach((entity) => {
        const $card = renderCardComponent({
          entityObject: entity,
          handleActionDashboard: () => console.log("dashboard"),
          handleActionReport: () => console.log("report"),
          handleActionSettings: () => console.log("settings"),
          handleSelect: () => console.log("select"),
          handInfo: true,
          handleClickCard: () => console.log("handleClickCard"),
        });

        // Use o método .append() do jQuery
        $("#content").append($card);
      });
    </script>
  </body>
</html>
