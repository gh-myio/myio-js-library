<div class="water-dashboard">
  <div class="toolbar-zoom">
    <div class="shopping-filter-chips" id="waterShoppingFilterChips"></div>
    <button id="fontMinus" aria-label="Diminuir fonte">−</button>
    <button id="fontPlus" aria-label="Aumentar fonte">＋</button>
  </div>
  <!-- Header -->
  <h2 class="title">Gestão de Água</h2>
  <p class="subtitle">Monitoramento de consumo e métricas de eficiência hídrica</p>

  <!-- Cards -->
  <div class="cards">
    <!-- Consumo Total de Lojas -->
    <div class="card" id="total-consumption-stores-card">
      <p class="label">Consumo Total Lojas</p>
      <h3 class="value" id="total-consumption-stores-value">
        <svg
          class="loading-spinner"
          style="width: 24px; height: 24px; animation: spin 1s linear infinite"
          viewBox="0 0 50 50"
        >
          <circle
            cx="25"
            cy="25"
            r="20"
            fill="none"
            stroke="#0288d1"
            stroke-width="5"
            stroke-linecap="round"
            stroke-dasharray="90,150"
            stroke-dashoffset="0"
          ></circle>
        </svg>
      </h3>
      <span class="trend neutral" id="total-consumption-stores-trend">Aguardando dados...</span>
      <span class="device-info" id="total-consumption-stores-info">Hidrômetros de lojas</span>
    </div>

    <!-- Consumo Total de Área Comum -->
    <div class="card" id="total-consumption-common-area-card">
      <p class="label">Consumo Total Área Comum</p>
      <h3 class="value" id="total-consumption-common-area-value">
        <svg
          class="loading-spinner"
          style="width: 24px; height: 24px; animation: spin 1s linear infinite"
          viewBox="0 0 50 50"
        >
          <circle
            cx="25"
            cy="25"
            r="20"
            fill="none"
            stroke="#0288d1"
            stroke-width="5"
            stroke-linecap="round"
            stroke-dasharray="90,150"
            stroke-dashoffset="0"
          ></circle>
        </svg>
      </h3>
      <span class="trend neutral" id="total-consumption-common-area-trend">Aguardando dados...</span>
      <span class="device-info" id="total-consumption-common-area-info">Hidrômetros de áreas comuns</span>
    </div>

    <!-- Consumo Total Geral -->
    <div class="card highlight" id="total-consumption-card">
      <p class="label">Consumo Total</p>
      <h3 class="value" id="total-consumption-value">
        <svg
          class="loading-spinner"
          style="width: 24px; height: 24px; animation: spin 1s linear infinite"
          viewBox="0 0 50 50"
        >
          <circle
            cx="25"
            cy="25"
            r="20"
            fill="none"
            stroke="#0288d1"
            stroke-width="5"
            stroke-linecap="round"
            stroke-dasharray="90,150"
            stroke-dashoffset="0"
          ></circle>
        </svg>
      </h3>
      <span class="trend neutral" id="total-consumption-trend">Aguardando dados...</span>
      <span class="device-info" id="total-consumption-info">Lojas + Área Comum</span>
    </div>
  </div>

  <!-- Charts -->
  <div class="charts">
    <div class="chart-box chart-box-water" id="lineChartBox">
      <!-- RFC-0097: Loading overlay -->
      <div id="lineChartLoading" class="chart-loading-overlay" style="display: none">
        <div class="chart-loading-spinner"></div>
        <span>Carregando dados...</span>
      </div>
      <div class="chart-header">
        <div class="chart-title-group">
          <button id="configureChartBtn" class="config-btn" title="Configurar período">⚙️</button>
          <h4 id="lineChartTitle">Consumo dos últimos 7 dias</h4>
        </div>
        <div class="chart-controls">
          <!-- RFC-0097: TABs de Modo de Visualização -->
          <div class="chart-tabs viz-mode-tabs">
            <button class="chart-tab active" data-viz="total">Consolidado</button>
            <button class="chart-tab" data-viz="separate">Por Shopping</button>
          </div>
          <!-- RFC-0097: TABs de Tipo de Gráfico -->
          <div class="chart-tabs chart-type-tabs">
            <button class="chart-tab active" data-type="line">Linhas</button>
            <button class="chart-tab" data-type="bar">Barras</button>
          </div>
          <!-- Botão Maximizar -->
          <button id="maximizeChartBtn" class="maximize-btn" title="Maximizar para tela toda">⛶</button>
        </div>
      </div>
      <canvas id="lineChart"></canvas>
    </div>
    <div class="chart-box">
      <div class="chart-header">
        <h4>Distribuição de Consumo de Água</h4>
        <div class="chart-controls">
          <label for="distributionMode" class="control-label">Visualizar:</label>
          <select id="distributionMode" class="chart-select">
            <option value="groups">Lojas vs Área Comum</option>
            <option value="stores">Lojas por Shopping</option>
            <option value="common">Área Comum por Shopping</option>
          </select>
        </div>
      </div>
      <canvas id="pieChart"></canvas>
    </div>
  </div>
  <br />
</div>
